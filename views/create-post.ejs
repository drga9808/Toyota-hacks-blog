<!---------------------------- Header ---------------------------->
<%- include('partials/header.ejs') %>

  <section class="container pb-5">
    <div class="post-creation">
      <h1>Create Post</h1>

      <form action="/create-post/publish-post" method="POST" enctype="multipart/form-data">
        <!-- Title -->
        <div class="placeholders">
          <input id="post-title" type="text" name="title" class="form-control" placeholder="Title" required>
        </div>

        <!-- Category -->
        <div class="placeholders">
          <select class="form-select" name="category" required>
            <option value="" disabled selected>Select a category</option>
            <option value="Parts">Parts</option>
            <option value="Maintenance">Maintenance</option>
            <option value="Common Issues">Common Issues</option>
            <option value="Test">Test</option>
          </select>
        </div>

        <!-- Read Time -->
        <div class="placeholders">
          <input id="readTime" type="text" name="readTime" class="form-control" placeholder="Read Time" required>
        </div>

        <!-- Image Upload -->
        <div class="placeholders">
          <div id="drop-zone" class="image-upload-box">
            <div class="upload-content">
              <i class="fas fa-file-upload fa-2x"></i>
              <p><strong>Upload an Image</strong></p>
              <p class="file-name">No File Chosen</p>
            </div>
            <input type="file" id="post-image" name="image" accept="image/*" style="display: none;">
          </div>
          <div id="image-error" class="text-danger mt-2" style="display: none;">
            <i class="fas fa-exclamation-circle"></i> Please upload an image before publishing the post.
          </div>
        </div>

        <!-- Description -->
        <div class="placeholders">
          <textarea id="post-description" name="description" class="form-control" placeholder="Short description"
            style="height: 80px" required></textarea>
        </div>

        <!-- Post Content -->
        <div class="placeholders">
          <label for="post-content">Post Content <small>(Markdown supported)</small>:</label>
          <textarea id="post-content" name="content" class="form-control"
            placeholder="Write your post here using Markdown..." style="height: 300px" required></textarea>

          <div class="form-check mt-2">
            <input class="form-check-input" type="checkbox" id="togglePreview">
            <label class="form-check-label" for="togglePreview">Show Markdown Preview</label>
          </div>

          <div id="markdown-preview" class="mt-3 p-3 border rounded bg-light" style="display: none;"></div>
        </div>

        <!-- Submit -->
        <div class="text-end mt-5 text-center">
          <button type="submit" class="btn btn-submit">Publish Post</button>
        </div>
      </form>
    </div>
  </section>

  <!---------------------------- Footer ---------------------------->
  <%- include('partials/footer.ejs') %>